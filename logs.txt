make run-multipath-primary
-server
Building multi-path example...
go build -o bin/multipath-primary-server ./multi-path-demo/primary/server.go
go build -o bin/multipath-secondary-server ./multi-path-demo/secondary/server.go
go build -o bin/multipath-client ./multi-path-demo/client.go
Starting multi-path PRIMARY server on localhost:4433...
./bin/multipath-primary-server
=== PRIMARY SERVER MULTI-PATH DEMO ===
[PRIMARY] 1. Starting listener on localhost:4433...
[KWIK] 2025/08/13 23:36:46.226805 [INFO] [comp=KWIK-SYSTEM] Wiring KWIK components together
[KWIK] 2025/08/13 23:36:46.226949 [INFO] [comp=KWIK-SYSTEM] Setting up message routing between components
[KWIK] 2025/08/13 23:36:46.226954 [INFO] [comp=KWIK-SYSTEM] All KWIK components wired successfully
[KWIK] 2025/08/13 23:36:46.226958 [INFO] [comp=KWIK-SYSTEM] Starting KWIK system
[KWIK] 2025/08/13 23:36:46.226962 [INFO] [comp=KWIK-SYSTEM] Session manager started
[KWIK] 2025/08/13 23:36:46.226970 [INFO] [comp=KWIK-SYSTEM] KWIK system started successfully
2025/08/13 23:36:46 failed to sufficiently increase receive buffer size (was: 208 kiB, wanted: 2048 kiB, got: 416 kiB). See https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes for details.
[KWIK] 2025/08/13 23:36:46.652165 [INFO] [comp=KWIK-SYSTEM] Listener created address=localhost:4433 
[KWIK] 2025/08/13 23:36:46.652175 [INFO] [comp=KWIK-SYSTEM] Server listener created address=localhost:4433 
[PRIMARY] ✅ Listening on localhost:4433
[PRIMARY] 2. Waiting for session...
DEBUG: Server received authentication request with role: PRIMARY, session ID: kwik-session-d56008b8fc4bc1c2a1799b927147aece
DEBUG: AuthManager handling authentication request with role: PRIMARY, sessionID: kwik-session-d56008b8fc4bc1c2a1799b927147aece, isAuthenticated: false
DEBUG: AuthManager authentication result: success=true, errorMessage=, finalRole=PRIMARY
DEBUG: Server authenticated client with role: PRIMARY, session ID: kwik-session-d56008b8fc4bc1c2a1799b927147aece
[PRIMARY] ✅ Session accepted
[PRIMARY] 2. Waiting for session...
[PRIMARY] 3. Handling session...
[PRIMARY] 4. Waiting for stream...
DEBUG: Server control frame handler started, listening for client responses...
[PRIMARY] ✅ Stream 0 accepted
[PRIMARY] 4. Waiting for stream...
[PRIMARY] Handling stream 0...
[PRIMARY] 5. Reading message from stream 0...
[PRIMARY] ✅ Read: Premier message du client
[PRIMARY] 6. Adding secondary path after reading message...
DEBUG: Server received control frame (74 bytes)
DEBUG: Server processing control frame type: ADD_PATH_RESPONSE
DEBUG: Server received AddPathResponse for path path-2952cd335a11a57e, success: true
DEBUG: Server routed AddPathResponse to waiting channel for path path-2952cd335a11a57e
[PRIMARY] ✅ Secondary path added: localhost:4434
[PRIMARY] 7. Writing partial response to stream 0...
[PRIMARY] ✅ Wrote partial response: Partie 1 de la réponse pour: Premier message du client
[PRIMARY] 8. Sending raw data to secondary path...
DEBUG: SendRawData checking for pathID path-2952cd335a11a57e in pendingPathIDs
DEBUG: pendingPathIDs[localhost:4434] = path-2952cd335a11a57e
DEBUG: Found matching pathID path-2952cd335a11a57e for address localhost:4434
DEBUG: PathID path-2952cd335a11a57e found in pendingPathIDs, proceeding with SendRawData
[PRIMARY] ✅ Raw data sent to secondary path: Données brutes pour serveur secondaire concernant: Premier message du client offset=55
[PRIMARY] 9. Reading second message from stream 0...
[PRIMARY] ✅ Read second message: Deuxième message du client
[PRIMARY] 10. Writing final response to stream 0...
[PRIMARY] ✅ Wrote final response: Réponse finale pour: Deuxième message du client (avec données agrégées)
[PRIMARY] 11. Stream 0 completed, closing...
DEBUG: Server control frame read error: EOF
2025/08/13 23:36:55 [PRIMARY] Stream error: KWIK_CONNECTION_LOST: failed to accept stream (caused by: Application error 0x0 (remote): path closed)

make run-multipath-seconda
ry-server
Building multi-path example...
go build -o bin/multipath-primary-server ./multi-path-demo/primary/server.go
go build -o bin/multipath-secondary-server ./multi-path-demo/secondary/server.go
go build -o bin/multipath-client ./multi-path-demo/client.go
Starting multi-path SECONDARY server on localhost:4434...
./bin/multipath-secondary-server
=== SECONDARY SERVER MULTI-PATH DEMO ===
[SECONDARY] 1. Starting listener on localhost:4434...
[KWIK] 2025/08/13 23:36:49.268121 [INFO] [comp=KWIK-SYSTEM] Wiring KWIK components together
[KWIK] 2025/08/13 23:36:49.268317 [INFO] [comp=KWIK-SYSTEM] Setting up message routing between components
[KWIK] 2025/08/13 23:36:49.268327 [INFO] [comp=KWIK-SYSTEM] All KWIK components wired successfully
[KWIK] 2025/08/13 23:36:49.268333 [INFO] [comp=KWIK-SYSTEM] Starting KWIK system
[KWIK] 2025/08/13 23:36:49.268340 [INFO] [comp=KWIK-SYSTEM] Session manager started
[KWIK] 2025/08/13 23:36:49.268355 [INFO] [comp=KWIK-SYSTEM] KWIK system started successfully
2025/08/13 23:36:49 failed to sufficiently increase receive buffer size (was: 208 kiB, wanted: 2048 kiB, got: 416 kiB). See https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes for details.
[KWIK] 2025/08/13 23:36:49.599893 [INFO] [comp=KWIK-SYSTEM] Listener created address=localhost:4434 
[KWIK] 2025/08/13 23:36:49.599902 [INFO] [comp=KWIK-SYSTEM] Server listener created address=localhost:4434 
[SECONDARY] ✅ Listening on localhost:4434
[SECONDARY] 2. Waiting for session...
DEBUG: Server received authentication request with role: SECONDARY, session ID: kwik-session-d56008b8fc4bc1c2a1799b927147aece
DEBUG: AuthManager handling authentication request with role: SECONDARY, sessionID: kwik-session-d56008b8fc4bc1c2a1799b927147aece, isAuthenticated: false
DEBUG: AuthManager accepting SECONDARY authentication for session kwik-session-d56008b8fc4bc1c2a1799b927147aece
DEBUG: AuthManager authentication result: success=true, errorMessage=, finalRole=SECONDARY
DEBUG: Server authenticated client with role: SECONDARY, session ID: kwik-session-d56008b8fc4bc1c2a1799b927147aece
[SECONDARY] ✅ Session accepted
[SECONDARY] 2. Waiting for session...
[SECONDARY] 3. Handling session...
[SECONDARY] 4. Waiting for stream...
DEBUG: Server control frame handler started, listening for client responses...
[SECONDARY] ✅ Stream 0 accepted
[SECONDARY] 4. Waiting for stream...
[SECONDARY] Handling stream 0...
[SECONDARY] 5. Reading from stream 0...
[SECONDARY] ✅ Read: Données brutes pour serveur secondaire concernant: Premier message du client offset=55
[SECONDARY] 6. Deciding response method for stream 0...
[SECONDARY] 6a. Responding in same stream 0...
[SECONDARY] ✅ Response sent in same stream: Réponse du serveur secondaire dans le même flux pour: Données brutes pour serveur secondaire concernant: Premier message du client offset=55
[SECONDARY] 7. Waiting before stream 0 completion...
[SECONDARY] ✅ Stream 0 completed
DEBUG: Server control frame read error: Application error 0x0 (remote): path closed
2025/08/13 23:36:55 [SECONDARY] Stream error: KWIK_CONNECTION_LOST: failed to accept stream (caused by: Application error 0x0 (remote): path closed)

make run-multipath-client
Building multi-path example...
go build -o bin/multipath-primary-server ./multi-path-demo/primary/server.go
go build -o bin/multipath-secondary-server ./multi-path-demo/secondary/server.go
go build -o bin/multipath-client ./multi-path-demo/client.go
Running multi-path client...
./bin/multipath-client
=== CLIENT MULTI-PATH DEMO ===
[CLIENT] 1. Dialing primary server...
[KWIK] 2025/08/13 23:36:52.737236 [INFO] [comp=KWIK-SYSTEM] Wiring KWIK components together
[KWIK] 2025/08/13 23:36:52.737359 [INFO] [comp=KWIK-SYSTEM] Setting up message routing between components
[KWIK] 2025/08/13 23:36:52.737364 [INFO] [comp=KWIK-SYSTEM] All KWIK components wired successfully
[KWIK] 2025/08/13 23:36:52.737369 [INFO] [comp=KWIK-SYSTEM] Starting KWIK system
[KWIK] 2025/08/13 23:36:52.737372 [INFO] [comp=KWIK-SYSTEM] Session manager started
[KWIK] 2025/08/13 23:36:52.737381 [INFO] [comp=KWIK-SYSTEM] KWIK system started successfully
2025/08/13 23:36:52 failed to sufficiently increase receive buffer size (was: 208 kiB, wanted: 2048 kiB, got: 416 kiB). See https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes for details.
[KWIK] 2025/08/13 23:36:52.742918 [INFO] [comp=KWIK-SYSTEM] Client session created sessionID=kwik-session-d56008b8fc4bc1c2a1799b927147aece address=localhost:4433 
[KWIK] 2025/08/13 23:36:52.742942 [INFO] [comp=KWIK-SYSTEM] Client session created address=localhost:4433 sessionID=kwik-session-d56008b8fc4bc1c2a1799b927147aece 
[CLIENT] ✅ Connected to primary server
[CLIENT] 2. Opening stream and sending first message...
[CLIENT] ✅ Sent: Premier message du client
[CLIENT] 3. Waiting for at least 2 paths...
[CLIENT] Current paths: 1
DEBUG: Client received AddPathRequest with PathId: path-2952cd335a11a57e, TargetAddress: localhost:4434
DEBUG: Client attempting to create path to localhost:4434
DEBUG: Client successfully created path to localhost:4434 in 3.584013ms
DEBUG: Client starting authentication on secondary path path-2952cd335a11a57e
DEBUG: Client creating SECONDARY authentication request for session kwik-session-d56008b8fc4bc1c2a1799b927147aece
DEBUG: Client authentication successful on secondary path path-2952cd335a11a57e
DEBUG: Client starting integration of secondary path path-2952cd335a11a57e
DEBUG: Client found managed path with original ID path-2952cd335a11a57e, secondary path has server ID path-2952cd335a11a57e
DEBUG: Client integration successful for secondary path path-2952cd335a11a57e
DEBUG: Client sending success response for path path-2952cd335a11a57e
DEBUG: Client sent AddPathResponse with success=true for path path-2952cd335a11a57e
DEBUG: Client routing raw packet (87 bytes) to data plane of path path-2952cd335a11a57e
[CLIENT] Current paths: 2
[CLIENT] ✅ At least 2 paths available
[CLIENT] 4. Reading from stream...
[CLIENT] ✅ Read: Partie 1 de la réponse pour: Premier message du client
[CLIENT] 5. Writing second message...
[CLIENT] ✅ Sent: Deuxième message du client
[CLIENT] 6. Reading second response...
[CLIENT] ✅ Read: Réponse finale pour: Deuxième message du client (avec données agrégées)
[CLIENT] 7. Waiting before termination...
[CLIENT] ✅ Demo completed
DEBUG: Client control frame read error: Application error 0x0 (local): path closed
[KWIK] 2025/08/13 23:36:55.747392 [INFO] [comp=KWIK-SYSTEM] Stopping KWIK system
[KWIK] 2025/08/13 23:36:55.747583 [INFO] [comp=KWIK-SYSTEM] Session manager stopped
[KWIK] 2025/08/13 23:36:55.749535 [INFO] [comp=KWIK-SYSTEM] KWIK system stopped successfully