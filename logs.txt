make run-multipath-primary-server
Building multi-path example...
go build -o bin/multipath-primary-server ./multi-path-demo/primary/server.go
go build -o bin/multipath-secondary-server ./multi-path-demo/secondary/server.go
go build -o bin/multipath-client ./multi-path-demo/client.go
Starting multi-path PRIMARY server on localhost:4433...
./bin/multipath-primary-server
[KWIK] 2025/08/12 15:05:10.546338 [INFO] [comp=KWIK-SYSTEM] Wiring KWIK components together
[KWIK] 2025/08/12 15:05:10.546515 [INFO] [comp=KWIK-SYSTEM] Setting up message routing between components
[KWIK] 2025/08/12 15:05:10.546524 [INFO] [comp=KWIK-SYSTEM] All KWIK components wired successfully
[KWIK] 2025/08/12 15:05:10.546530 [INFO] [comp=KWIK-SYSTEM] Starting KWIK system
[KWIK] 2025/08/12 15:05:10.546535 [INFO] [comp=KWIK-SYSTEM] Session manager started
[KWIK] 2025/08/12 15:05:10.546549 [INFO] [comp=KWIK-SYSTEM] KWIK system started successfully
2025/08/12 15:05:10 failed to sufficiently increase receive buffer size (was: 208 kiB, wanted: 2048 kiB, got: 416 kiB). See https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes for details.
[KWIK] 2025/08/12 15:05:10.635197 [INFO] [comp=KWIK-SYSTEM] Listener created address=localhost:4433 
[KWIK] 2025/08/12 15:05:10.635204 [INFO] [comp=KWIK-SYSTEM] Server listener created address=localhost:4433 
2025/08/12 15:05:10 Multi-path server listening on localhost:4433
DEBUG: Server control frame handler started, listening for client responses...
2025/08/12 15:05:20 [PS->]: [C] connected with 1 paths
2025/08/12 15:05:20 [PS->]: Add secondary path to localhost:4434...
DEBUG: Server received control frame (74 bytes)
DEBUG: Server processing control frame type: ADD_PATH_RESPONSE
DEBUG: Server received AddPathResponse for path path-0f470ecab6e39afb, success: true
DEBUG: Server routed AddPathResponse to waiting channel for path path-0f470ecab6e39afb
2025/08/12 15:05:21 [PS->]: AddPath request sent successfully to [C]
2025/08/12 15:05:23 [PS->]: Sending raw data to [2S]...
DEBUG: SendRawData checking for pathID path-0f470ecab6e39afb in pendingPathIDs
DEBUG: pendingPathIDs[localhost:4434] = path-0f470ecab6e39afb
DEBUG: Found matching pathID path-0f470ecab6e39afb for address localhost:4434
DEBUG: PathID path-0f470ecab6e39afb found in pendingPathIDs, proceeding with SendRawData
2025/08/12 15:05:23 [PS->]: Raw data sent successfully using SendRawData API!
DEBUG: Server control frame read error: EOF
2025/08/12 15:05:41 Stream error: KWIK_CONNECTION_LOST: failed to accept stream (caused by: Application error 0x0 (remote): path closed)
^Cmake: *** [Makefile:45: run-multipath-primary-server] Interrompre



make run-multipath-seconda
ry-server
Building multi-path example...
go build -o bin/multipath-primary-server ./multi-path-demo/primary/server.go
go build -o bin/multipath-secondary-server ./multi-path-demo/secondary/server.go
go build -o bin/multipath-client ./multi-path-demo/client.go
Starting multi-path SECONDARY server on localhost:4434...
./bin/multipath-secondary-server
[KWIK] 2025/08/12 15:05:12.397539 [INFO] [comp=KWIK-SYSTEM] Wiring KWIK components together
[KWIK] 2025/08/12 15:05:12.397717 [INFO] [comp=KWIK-SYSTEM] Setting up message routing between components
[KWIK] 2025/08/12 15:05:12.397723 [INFO] [comp=KWIK-SYSTEM] All KWIK components wired successfully
[KWIK] 2025/08/12 15:05:12.397727 [INFO] [comp=KWIK-SYSTEM] Starting KWIK system
[KWIK] 2025/08/12 15:05:12.397732 [INFO] [comp=KWIK-SYSTEM] Session manager started
[KWIK] 2025/08/12 15:05:12.397743 [INFO] [comp=KWIK-SYSTEM] KWIK system started successfully
2025/08/12 15:05:12 failed to sufficiently increase receive buffer size (was: 208 kiB, wanted: 2048 kiB, got: 416 kiB). See https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes for details.
[KWIK] 2025/08/12 15:05:12.467508 [INFO] [comp=KWIK-SYSTEM] Listener created address=localhost:4434 
[KWIK] 2025/08/12 15:05:12.467516 [INFO] [comp=KWIK-SYSTEM] Server listener created address=localhost:4434 
2025/08/12 15:05:12 [2S->]: listening on localhost:4434
2025/08/12 15:05:12 [2S->]: Waiting for connections...
2025/08/12 15:05:21 [2S->] New connection accepted from [C]
DEBUG: Server control frame handler started, listening for client responses...
2025/08/12 15:05:21 [2S->]: handling session with 1 paths
[2S->]: Starting proactive data response sender
[2S->]: Will only send messages when there's data to process
2025/08/12 15:05:23 [2S->]: received stream 0
2025/08/12 15:05:23 [2S->]: received message: Message en direction de [2S] par SendRawData! depuis [PS]
[2S->]: Processing message: Message en direction de [2S] par SendRawData! depuis [PS]
2025/08/12 15:05:23 [2S->]: triggered Response: [2S->]: response to: Message en direction de [2S] par SendRawData! depuis [PS] [processed at 15:05:23]
2025/08/12 15:05:23 [2S->] sent response: Message de [2S] à [C] avec 1 chemin en reponse à ': Message en direction de [2S] par SendRawData! depuis [PS]'
[2S->]: Received data to send proactively: [2S->]: response to: Message en direction de [2S] par SendRawData! depuis [PS] [processed at 15:05:23]
[2S->]: Has 1 active paths
[2S->]: Path 1: ID=path-3707f5570ed79452, Address=127.0.0.1:47215, Primary=true
[2S->]: Successfully created stream 1 for proactive response
[2S->]: Sent proactive response #1: [2S->]: response to: Message en direction de [2S] par SendRawData! depuis [PS] [processed at 15:05:23]
2025/08/12 15:05:41 [2S->]: stream error: KWIK_CONNECTION_LOST: failed to accept stream (caused by: Application error 0x0 (remote): path closed)
DEBUG: Server control frame read error: Application error 0x0 (remote): path closed
^Cmake: *** [Makefile:49: run-multipath-secondary-server] Interrompre


make run-multipath-client
Building multi-path example...
go build -o bin/multipath-primary-server ./multi-path-demo/primary/server.go
go build -o bin/multipath-secondary-server ./multi-path-demo/secondary/server.go
go build -o bin/multipath-client ./multi-path-demo/client.go
Running multi-path client...
./bin/multipath-client
[KWIK] 2025/08/12 15:05:20.490560 [INFO] [comp=KWIK-SYSTEM] Wiring KWIK components together
[KWIK] 2025/08/12 15:05:20.490654 [INFO] [comp=KWIK-SYSTEM] Setting up message routing between components
[KWIK] 2025/08/12 15:05:20.490659 [INFO] [comp=KWIK-SYSTEM] All KWIK components wired successfully
[KWIK] 2025/08/12 15:05:20.490663 [INFO] [comp=KWIK-SYSTEM] Starting KWIK system
[KWIK] 2025/08/12 15:05:20.490667 [INFO] [comp=KWIK-SYSTEM] Session manager started
[KWIK] 2025/08/12 15:05:20.490673 [INFO] [comp=KWIK-SYSTEM] KWIK system started successfully
2025/08/12 15:05:20 failed to sufficiently increase receive buffer size (was: 208 kiB, wanted: 2048 kiB, got: 416 kiB). See https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes for details.
[KWIK] 2025/08/12 15:05:20.495986 [INFO] [comp=KWIK-SYSTEM] Client session created sessionID=kwik-session-de0ab911faf1397cbd3236556c7142ca address=localhost:4433 
[KWIK] 2025/08/12 15:05:20.495999 [INFO] [comp=KWIK-SYSTEM] Client session created address=localhost:4433 sessionID=kwik-session-de0ab911faf1397cbd3236556c7142ca 
[C->]: Connected to [PS]

Initial paths (1 total):
  1. localhost:4433 (Primary: true, Status: ACTIVE)

[C->]: Starting listener for [2S] messages
DEBUG: Client found managed path with original ID path-0f470ecab6e39afb, secondary path has server ID path-0f470ecab6e39afb
[C->]: Checking 2 active paths for incoming streams
[C->]: Checking path 1: localhost:4433 (Primary: true)
[C->]: Checking path 2: localhost:4434 (Primary: false)
[C->]: Starting listener for secondary path: localhost:4434
[C->]: Starting dedicated listener for secondary path localhost:4434
DEBUG: Client routing raw packet (57 bytes) to data plane of path path-0f470ecab6e39afb
Sent: Message de [C] à [PS], pour demande de ressources!
Received: Reponse du [PS] au [C] avec 1 chemins pour: Message de [C] à [PS], pour demande de ressources!
[C->]: Waiting for [PS] to add secondary path...
[C->]: Stream accept error on main session: context deadline exceeded
[C->]: Checking 2 active paths for incoming streams
[C->]: Checking path 1: localhost:4433 (Primary: true)
[C->]: Checking path 2: localhost:4434 (Primary: false)
[C->]: Starting listener for secondary path: localhost:4434
[C->]: Starting dedicated listener for secondary path localhost:4434
[C->]: Accepted stream 2 from secondary path localhost:4434
[C->]: Handling incoming message on stream 2
🎉 [C->] RECEIVED PROACTIVE MESSAGE FROM [2S]: [2S->]: response to: Message en direction de [2S] par SendRawData! depuis [PS] [processed at 15:05:23]
[C->]: Sent ACK back to secondary server

After server path addition paths (2 total):
  1. localhost:4434 (Primary: false, Status: ACTIVE)
  2. localhost:4433 (Primary: true, Status: ACTIVE)

Sent: Second Message à [PS] en provenance de [C]
Received: Reponse du [PS] au [C] avec 1 chemins pour: Second Message à [PS] en provenance de [C]
[C->]: Waiting for proactive messages from [2S]...
[C->]: Stream accept error on main session: context deadline exceeded
[C->]: Checking 2 active paths for incoming streams
[C->]: Checking path 1: localhost:4433 (Primary: true)
[C->]: Checking path 2: localhost:4434 (Primary: false)
[C->]: Starting listener for secondary path: localhost:4434
[C->]: Starting dedicated listener for secondary path localhost:4434
[C->]: Stream accept error on main session: context deadline exceeded
[C->]: Checking 2 active paths for incoming streams
[C->]: Checking path 1: localhost:4433 (Primary: true)
[C->]: Checking path 2: localhost:4434 (Primary: false)
[C->]: Starting listener for secondary path: localhost:4434
[C->]: Starting dedicated listener for secondary path localhost:4434
[C->]: Stream accept error on main session: context deadline exceeded
[C->]: Checking 2 active paths for incoming streams
[C->]: Checking path 1: localhost:4433 (Primary: true)
[C->]: Checking path 2: localhost:4434 (Primary: false)
[C->]: Starting listener for secondary path: localhost:4434
[C->]: Starting dedicated listener for secondary path localhost:4434
[C->]: Stream accept error on main session: context deadline exceeded
[C->]: Checking 2 active paths for incoming streams
[C->]: Checking path 1: localhost:4434 (Primary: false)
[C->]: Starting listener for secondary path: localhost:4434
[C->]: Checking path 2: localhost:4433 (Primary: true)
[C->]: Starting dedicated listener for secondary path localhost:4434
[C->]: Stream accept error on main session: context deadline exceeded
[C->]: Checking 2 active paths for incoming streams
[C->]: Checking path 1: localhost:4433 (Primary: true)
[C->]: Checking path 2: localhost:4434 (Primary: false)
[C->]: Starting listener for secondary path: localhost:4434
[C->]: Starting dedicated listener for secondary path localhost:4434
Multi-path demo completed
[C->]: Failed to accept stream on secondary path localhost:4434: KWIK_CONNECTION_LOST: session closed
[C->]: Failed to accept stream on secondary path localhost:4434: KWIK_CONNECTION_LOST: session closed
[C->]: Stream accept error on main session: KWIK_CONNECTION_LOST: session closed
[C->]: Failed to accept stream on secondary path localhost:4434: KWIK_CONNECTION_LOST: session closed
[C->]: Failed to accept stream on secondary path localhost:4434: KWIK_CONNECTION_LOST: session closed
[C->]: Failed to accept stream on secondary path localhost:4434: KWIK_CONNECTION_LOST: session closed
[C->]: Failed to accept stream on secondary path localhost:4434: KWIK_CONNECTION_LOST: session closed
[C->]: Failed to accept stream on secondary path localhost:4434: KWIK_CONNECTION_LOST: session closed
DEBUG: Client control frame read error: Application error 0x0 (local): path closed
[KWIK] 2025/08/12 15:05:41.006281 [INFO] [comp=KWIK-SYSTEM] Stopping KWIK system
[KWIK] 2025/08/12 15:05:41.006300 [INFO] [comp=KWIK-SYSTEM] Session manager stopped
[KWIK] 2025/08/12 15:05:41.060692 [INFO] [comp=KWIK-SYSTEM] KWIK system stopped successfully